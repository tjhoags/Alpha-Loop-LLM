# =============================================================================
# ALC-Algo Azure Configuration
# Author: Tom Hogan | Alpha Loop Capital, LLC
# =============================================================================
# This file contains Azure-specific configuration for the ALC-Algo platform.
# Update the values below after running the Azure setup.

# =============================================================================
# Azure Account Settings
# =============================================================================
azure:
  # From: az account show
  subscription_id: "${AZURE_SUBSCRIPTION_ID}"
  tenant_id: "${AZURE_TENANT_ID}"
  
  # Resource naming (must match terraform.tfvars)
  environment: "dev"  # dev, staging, or prod
  
  # Resource Group
  resource_group: "rg-alc-algo-dev"
  location: "eastus"

# =============================================================================
# Azure Storage - Agent Memory & Data
# =============================================================================
storage:
  # Storage account name (from Terraform output)
  account_name: "stalcalgodev"
  
  # Containers for different purposes
  containers:
    # Agent memory and learning state
    agent_memory: "agent-memory"
    
    # Market data cache
    data: "data"
    
    # Trained ML models
    models: "models"
    
    # Logs and audit trails
    logs: "logs"
    
    # Backups
    backups: "backups"
    
  # Blob versioning (enables recovery of previous states)
  versioning_enabled: true

# =============================================================================
# Azure Key Vault - Secrets Management
# =============================================================================
key_vault:
  name: "kv-alc-algo-dev"
  
  # Secret naming convention (use dashes, not underscores)
  secrets:
    openai: "OPENAI-API-KEY"
    anthropic: "ANTHROPIC-API-KEY"
    google_1: "GOOGLE-API-KEY-1"
    google_2: "GOOGLE-API-KEY-2"
    google_3: "GOOGLE-API-KEY-3"
    perplexity: "PERPLEXITY-API-KEY"
    alpha_vantage: "ALPHA-VANTAGE-API-KEY"
    ibkr_account: "IBKR-ACCOUNT-ID"
    slack_webhook: "SLACK-WEBHOOK-URL"
    notion_api: "NOTION-API-KEY"

# =============================================================================
# Azure Machine Learning - Training Infrastructure
# =============================================================================
ml_workspace:
  name: "mlw-alc-algo-dev"
  
  # Compute cluster for training jobs
  compute_cluster: "alc-training-cluster"
  
  # VM sizes for different workloads
  vm_sizes:
    training: "Standard_DS3_v2"       # 4 cores, 14 GB RAM
    gpu_training: "Standard_NC6s_v3"  # 6 cores, 112 GB RAM, 1x V100
    
  # Auto-scaling settings
  scaling:
    min_nodes: 0  # Scale to zero when idle (saves money!)
    max_nodes: 2  # Maximum parallel training jobs

# =============================================================================
# Multi-Machine Training Configuration
# =============================================================================
# CRITICAL: This allows your Lenovo workstation and MacBook Pro to train
# simultaneously without overwriting each other's learning data.

multi_machine:
  # Enable multi-machine synchronization
  enabled: true
  
  # How often to sync state (seconds)
  sync_interval: 300  # 5 minutes
  
  # State merge strategy:
  # - "merge": Combine learning outcomes from all machines (RECOMMENDED)
  # - "latest": Use the most recent state only
  # - "weighted": Weight by machine performance
  merge_strategy: "merge"
  
  # Machine identification (auto-detected from hostname)
  # Example: "LENOVO_WORKSTATION", "Toms_MacBook_Pro"
  machine_id: "${HOSTNAME}"
  
  # Conflict resolution
  conflict_resolution:
    # When same time-series data exists from multiple machines
    duplicates: "dedupe"  # dedupe, keep_all, keep_latest
    
    # When belief values conflict
    beliefs: "average"  # average, max_confidence, latest
    
    # When mistake patterns differ
    mistakes: "sum"  # sum, max, merge

# =============================================================================
# Agent State Persistence
# =============================================================================
persistence:
  # Auto-save interval (seconds)
  auto_save_interval: 600  # 10 minutes
  
  # What to persist
  save_components:
    - learning_outcomes
    - mistake_patterns
    - beliefs
    - calibration_history
    - regime_history
    - regime_performance
    - creative_insights
    
  # Compression for storage efficiency
  compression: true
  
  # Retention policy (days)
  retention:
    state_files: 30
    learning_history: 365

# =============================================================================
# Monitoring & Logging
# =============================================================================
monitoring:
  # Application Insights
  app_insights:
    name: "appi-alc-algo-dev"
    enabled: true
    
  # Log Analytics
  log_analytics:
    name: "log-alc-algo-dev"
    retention_days: 30
    
  # Metrics to track
  metrics:
    - agent_execution_count
    - learning_accuracy
    - regime_changes
    - error_rate
    - api_latency

# =============================================================================
# Container Apps (Optional - for API deployment)
# =============================================================================
container_apps:
  environment: "cae-alc-algo-dev"
  
  # API service configuration
  api:
    name: "ca-alc-algo-api"
    cpu: 0.5
    memory: "1Gi"
    min_replicas: 0
    max_replicas: 3

