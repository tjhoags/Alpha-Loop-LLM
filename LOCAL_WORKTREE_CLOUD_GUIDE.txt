================================================================================
LOCAL vs WORKTREE vs CLOUD - UNDERSTANDING GIT WORKFLOWS
================================================================================
Author: Tom Hogan | Alpha Loop Capital, LLC
Date: December 2025

This guide explains when to use local development, git worktrees, and cloud
resources for the Alpha Loop LLM project.

================================================================================
QUICK DECISION MATRIX
================================================================================

USE LOCAL when:
- Making quick edits to a single branch
- Testing small changes
- You only need to work on one thing at a time

USE WORKTREE when:
- Working on multiple features simultaneously
- Testing different branches without switching
- Running parallel training on different configurations

USE CLOUD when:
- Running overnight training (Azure compute)
- Storing market data (Azure SQL)
- Accessing APIs (all API calls)
- Sharing files with team (Dropbox)

================================================================================
1. LOCAL DEVELOPMENT
================================================================================

WHAT IT IS:
-----------
A single git repository clone on your machine. One working directory,
one branch checked out at a time.

LOCATION:
---------
Windows: C:\Users\tom\Alpha-Loop-LLM\Alpha-Loop-LLM-1
Mac: ~/Alpha-Loop-LLM/Alpha-Loop-LLM-1

WHEN TO USE:
------------
- Daily development on a single feature
- Quick bug fixes
- Learning the codebase
- Simple workflows

HOW TO USE:
-----------
# Navigate to local repo
cd C:\Users\tom\Alpha-Loop-LLM\Alpha-Loop-LLM-1

# Check current branch
git branch

# Switch branches
git checkout main
git checkout chris/feature-name

# Pull latest changes
git pull origin main

PROS:
-----
+ Simple to understand
+ Low disk space usage
+ Straightforward workflow

CONS:
-----
- Must switch branches to work on different features
- Can't run parallel tests on different branches
- Risk of uncommitted changes when switching

================================================================================
2. GIT WORKTREES
================================================================================

WHAT IT IS:
-----------
Multiple working directories linked to a single git repository. Each worktree
can have a different branch checked out simultaneously.

LOCATION:
---------
Windows: C:\Users\tom\.cursor\worktrees\Alpha-Loop-LLM-1\[folder]
Examples:
  - C:\Users\tom\.cursor\worktrees\Alpha-Loop-LLM-1\iwu   (current working)
  - C:\Users\tom\.cursor\worktrees\Alpha-Loop-LLM-1\gkv   (another branch)
  - C:\Users\tom\.cursor\worktrees\Alpha-Loop-LLM-1\sii   (another branch)

WHEN TO USE:
------------
- Working on multiple features that can't be merged yet
- Running tests on multiple configurations
- Comparing behavior between branches
- Training models with different hyperparameters simultaneously
- Code review (have both branches open)

HOW TO CREATE A WORKTREE:
-------------------------
# Navigate to main repo
cd C:\Users\tom\Alpha-Loop-LLM\Alpha-Loop-LLM-1

# Create a new worktree for a branch
git worktree add ../worktrees/new-feature chris/new-feature

# List all worktrees
git worktree list

# Remove a worktree
git worktree remove ../worktrees/old-feature

HOW TO USE WORKTREES:
---------------------
# Each worktree is independent
cd C:\Users\tom\.cursor\worktrees\Alpha-Loop-LLM-1\iwu
# Work on feature A

cd C:\Users\tom\.cursor\worktrees\Alpha-Loop-LLM-1\gkv
# Work on feature B simultaneously

# Both can run scripts, train models, etc. at the same time

NAMING CONVENTION:
------------------
Worktree folders use short 3-letter codes:
- iwu: Main working directory
- gkv: Secondary branch
- sii: Another branch

PROS:
-----
+ Work on multiple branches simultaneously
+ Run parallel training/testing
+ No need to stash changes when switching tasks
+ Each worktree is isolated

CONS:
-----
- Uses more disk space
- More complex to manage
- Must remember which worktree is which branch

================================================================================
3. CLOUD RESOURCES
================================================================================

WHAT IT IS:
-----------
Remote services for compute, storage, and APIs.

CLOUD COMPONENTS:
-----------------

A. AZURE SQL DATABASE
   - Purpose: Store market data, model results, logs
   - Location: alc-sql-server.database.windows.net
   - Access: Automatic via .env credentials
   - When to use: Always (data persistence)

B. AZURE COMPUTE (Future)
   - Purpose: Run intensive training jobs
   - When to use: Overnight training, large batch processing
   
C. GITHUB (tjhoags/alpha-loop-llm)
   - Purpose: Code version control
   - When to use: Always push changes here
   
D. DROPBOX (Alphaloopcapital Dropbox\ALC Tech Agents)
   - Purpose: Shared files, API keys, documents
   - Location: C:\Users\tom\Alphaloopcapital Dropbox\ALC Tech Agents
   - When to use: Sharing with Chris, backing up configs

E. APIs (Cloud Services)
   - Massive.com: Market data
   - Alpha Vantage: Stock data
   - FRED: Economic data
   - OpenAI/Anthropic/Perplexity: AI services

WHEN TO USE CLOUD:
------------------
ALWAYS use cloud for:
- Market data (API calls)
- Data storage (Azure SQL)
- Code backup (GitHub)
- Shared files (Dropbox)

Use LOCAL compute for:
- Development and testing
- Small training runs
- Quick iterations

Use CLOUD compute for:
- Full universe training
- Overnight batch processing
- Production trading

================================================================================
4. TYPICAL WORKFLOWS
================================================================================

WORKFLOW A: Daily Development
-----------------------------
1. Open Cursor IDE
2. Navigate to your worktree: cd iwu
3. Activate venv: .\venv\Scripts\Activate.ps1
4. Pull latest: git pull origin main
5. Create/switch to your branch: git checkout -b chris/feature
6. Make changes
7. Test locally: python scripts/test_all_apis.py
8. Commit: git add -A && git commit -m "description"
9. Push: git push origin chris/feature

WORKFLOW B: Parallel Feature Development
----------------------------------------
1. Create worktree A: git worktree add ../feature-a chris/feature-a
2. Create worktree B: git worktree add ../feature-b chris/feature-b
3. Open Terminal 1 in feature-a folder, work on feature A
4. Open Terminal 2 in feature-b folder, work on feature B
5. Run tests in both simultaneously
6. Commit each independently

WORKFLOW C: Overnight Training
------------------------------
1. Ensure data is in Azure SQL
2. Navigate to worktree
3. Activate venv
4. Run training script:
   python src/ml/massive_trainer.py --batch-size 50
5. Leave running overnight
6. Morning: Check logs and model grades

WORKFLOW D: Production Deployment
---------------------------------
1. Merge approved changes to main:
   git checkout main
   git merge chris/approved-feature
2. Push to origin: git push origin main
3. Pull on production machine
4. Run tests: python scripts/test_all_apis.py
5. Start production: python src/trading/production_algo.py

================================================================================
5. SUMMARY TABLE
================================================================================

| Task                    | Use Local | Use Worktree | Use Cloud |
|-------------------------|-----------|--------------|-----------|
| Edit code               | YES       | YES          | NO        |
| Run tests               | YES       | YES          | OPTIONAL  |
| Train models (small)    | YES       | YES          | NO        |
| Train models (full)     | OK        | YES          | YES       |
| Store data              | NO        | NO           | YES       |
| API calls               | -         | -            | YES       |
| Backup code             | -         | -            | YES       |
| Share files             | NO        | NO           | YES       |
| Multiple features       | NO        | YES          | -         |
| Quick fixes             | YES       | YES          | NO        |

================================================================================
6. COMMANDS REFERENCE
================================================================================

LOCAL REPO COMMANDS:
--------------------
git clone [url]              Clone repository
git checkout [branch]        Switch branch
git branch                   List branches
git status                   Check status
git pull origin main         Get latest from main

WORKTREE COMMANDS:
------------------
git worktree list            List all worktrees
git worktree add [path] [branch]   Create worktree
git worktree remove [path]   Remove worktree
git worktree prune           Clean up stale worktrees

AZURE/CLOUD COMMANDS:
---------------------
python scripts/test_db_connection.py    Test database
python scripts/test_all_apis.py         Test all APIs

================================================================================
REMEMBER
================================================================================

1. LOCAL = One branch at a time, simple workflow
2. WORKTREE = Multiple branches simultaneously, parallel work
3. CLOUD = Data storage, APIs, backups (always use for these)

When in doubt:
- Use worktrees for development (you're doing this now in iwu)
- Push to GitHub for backup
- Keep .env synced via Dropbox
- Data always goes to Azure SQL

================================================================================
END OF GUIDE
================================================================================

